{
   "title":"ProphetStor Federator.ai Cost Management - Node",
   "description":"## ProphetStor Federator.ai is an AI-based solution that helps enterprises manage and optimize resources for applications on Kubernetes and virtual machines (VMs) in VMware clusters.\n\nUsing advanced machine-learning algorithms to predict application workloads, Federator.ai offers:\n\n  - AI-based workload prediction for containerized applications in Kubernetes clusters as well as VMs in VMware clusters and Amazon Web Services (AWS) Elastic Compute Cloud (EC2)\n  - Resource recommendations based on workload prediction, application, Kubernetes, and other related metrics\n  - Automatic provisioning of CPU/memory for generic Kubernetes application controllers/namespaces\n  - Correlation and causality analysis of microservices/controllers of Kubernetes applications\n  - Automatic scaling of Kubernetes application containers, Kafka consumer groups, and Ingress upstream services\n  - Multicloud cost analysis and recommendations based on workload predictions for Kubernetes clusters and VM clusters\n  - Actual cost and potential savings based on recommendations for clusters, Kubernetes applications, VMs, and Kubernetes namespaces",
   "widgets":[
      {
         "id":5576666476130138,
         "definition":{
            "title":"Cluster Node Cost Management - Daily",
            "type":"group",
            "background_color":"vivid_blue",
            "show_title":true,
            "layout_type":"ordered",
            "widgets":[
               {
                  "id":1596327383096410,
                  "definition":{
                     "title":"Estimated Savings",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"((query1 - query2) + abs(query1 - query2)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#0f23db",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.node{$kube_cluster_name,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_day.node{$kube_cluster_name,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"   $/day",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":0,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":238051746241092,
                  "definition":{
                     "title":"Estimated Savings %",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"(100 - query1 / query2 * 100 + abs(100 - query1 / query2 * 100)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#6a18c9",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_day.node{$kube_cluster_name,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.node{$kube_cluster_name,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"%",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":3,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":6859244150747374,
                  "definition":{
                     "title":"Current Cost based on Resource Allocation",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.node{$kube_cluster_name,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"$/day",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":3020412275613304,
                  "definition":{
                     "title":"Estimated Cost Based on Recommendations",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_day.node{$kube_cluster_name,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":" $/day",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":9,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":4922378087476458,
                  "definition":{
                     "title":"Clusters",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.node.count{$kube_cluster_name} by {kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2
                  },
                  "layout":{
                     "x":0,
                     "y":1,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":8500703265478498,
                  "definition":{
                     "title":"Cluster Node Cost based on Resource Allocation ($/day)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1w"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/day)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.node{$kube_cluster_name,$host,time_window:24_hours} by {host,kube_cluster_name}.rollup(avg, 86400)",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"cool",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"bars"
                        }
                     ]
                  },
                  "layout":{
                     "x":1,
                     "y":1,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":2401899656061080,
                  "definition":{
                     "title":"Cluster Node Cost based on Resource Allocation ($/day)",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1w"
                     },
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1",
                                 "limit":{
                                    "order":"desc"
                                 }
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.node{$kube_cluster_name,$host,time_window:24_hours} by {kube_cluster_name,host}.rollup(avg, 86400)",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "type":"sunburst",
                     "legend":{
                        "type":"table"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":1,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":1603911558207132,
                  "definition":{
                     "title":"Nodes",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.node.count{$kube_cluster_name} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2
                  },
                  "layout":{
                     "x":0,
                     "y":2,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":4054822290153696,
                  "definition":{
                     "title":"Cluster Node Cost From Resource Allocation vs. Cost From Actual Usage ($/hour)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/hour)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_alloc_cost.node{$kube_cluster_name,$host,granularity:1_hour} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"purple",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        },
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Usage Cost ($/hour)",
                                 "formula":"query0"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_usage_cost.node{$kube_cluster_name,$host,granularity:1_hour} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query0"
                              }
                           ],
                           "style":{
                              "palette":"warm",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        }
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":3,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":2167175242239504,
                  "definition":{
                     "type":"note",
                     "content":"### Cost Efficiency\nThe cost of actual resource usage divided by the cost of allocated resources",
                     "background_color":"yellow",
                     "font_size":"12",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":true,
                     "tick_pos":"50%",
                     "tick_edge":"right",
                     "has_padding":false
                  },
                  "layout":{
                     "x":6,
                     "y":3,
                     "width":1,
                     "height":2
                  }
               },
               {
                  "id":5300198412913588,
                  "definition":{
                     "title":"Cluster Node Cost Efficiency (%)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"auto",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1 / query2 * 100"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_usage_cost.node{$kube_cluster_name,$host,granularity:1_hour} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_alloc_cost.node{$kube_cluster_name,$host,granularity:1_hour} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query2"
                              }
                           ],
                           "style":{
                              "palette":"dog_classic"
                           },
                           "display_type":"line"
                        }
                     ],
                     "yaxis":{
                        "include_zero":true,
                        "label":"",
                        "scale":"linear",
                        "min":"auto",
                        "max":"auto"
                     }
                  },
                  "layout":{
                     "x":7,
                     "y":3,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":6136896502800608,
                  "definition":{
                     "type":"note",
                     "content":"# Current Cluster Node Configuration",
                     "background_color":"blue",
                     "font_size":"24",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":0,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":285812371698396,
                  "definition":{
                     "type":"note",
                     "content":"# Recommended Cluster Node Configuration\n***For next 24 hours***",
                     "background_color":"blue",
                     "font_size":"18",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":6,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":5656607102289424,
                  "definition":{
                     "title":"Current Cluster Node Configuration (Resource Allocation)",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"CPU Capacity",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              },
                              {
                                 "alias":"Memory Capacity",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query2"
                              },
                              {
                                 "alias":"Storage Size",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query3"
                              },
                              {
                                 "alias":"Cost ($/day)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query6"
                              },
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query7"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:kubernetes_state.node.cpu_capacity{$kube_cluster_name} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:kubernetes_state.node.memory_capacity{$kube_cluster_name} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:system.disk.total{$kube_cluster_name} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query3",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.node{$kube_cluster_name,time_window:24_hours} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query6",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_efficiency_per_day.node{$kube_cluster_name,time_window:24_hours} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query7",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":6,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":6477326128273156,
                  "definition":{
                     "title":"Recommended Cluster Node Configuration (Resource Allocation)",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Cost ($/day)",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_day.node{$kube_cluster_name,time_window:24_hours} by {kube_cluster_name,cpu,memory,kube_node_role,host}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":6,
                     "y":6,
                     "width":4,
                     "height":2
                  }
               },
               {
                  "id":509364829038526,
                  "definition":{
                     "title":"Recommended Cluster Cost Efficiency (%)",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_green",
                                       "comparator":">=",
                                       "value":0
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query2"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:federatorai.recommendation.cost_analysis.cost_efficiency_per_day.cluster{$kube_cluster_name,time_window:24_hours} by {kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":10,
                     "y":6,
                     "width":2,
                     "height":2
                  }
               }
            ]
         },
         "layout":{
            "x":0,
            "y":0,
            "width":12,
            "height":9
         }
      },
      {
         "id":2786398708612450,
         "definition":{
            "title":"Cluster Node Cost Management - Weekly",
            "type":"group",
            "background_color":"vivid_purple",
            "show_title":true,
            "layout_type":"ordered",
            "widgets":[
               {
                  "id":8722427638671288,
                  "definition":{
                     "title":"Estimated Savings",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"((query1 - query2) + abs(query1 - query2)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#0f23db",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.node{$kube_cluster_name,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_week.node{$kube_cluster_name,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"   $/week",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":0,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":8402463975858328,
                  "definition":{
                     "title":"Estimated Savings %",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"(100 - query1 / query2 * 100 + abs(100 - query1 / query2 * 100)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#6a18c9",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_week.node{$kube_cluster_name,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.node{$kube_cluster_name,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"%",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":3,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":3065841398662748,
                  "definition":{
                     "title":"Current Cost based on Resource Allocation",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.node{$kube_cluster_name,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"$/week",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":8327479161833988,
                  "definition":{
                     "title":"Estimated Cost Based on Recommendations",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_week.node{$kube_cluster_name,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":" $/week",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":9,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":6688963836515312,
                  "definition":{
                     "title":"Clusters",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.node.count{$kube_cluster_name} by {kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2
                  },
                  "layout":{
                     "x":0,
                     "y":1,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":3107436801609840,
                  "definition":{
                     "title":"Cluster Node Cost based on Resource Allocation ($/week)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1mo"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/week)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.node{$kube_cluster_name,$host,time_window:7_days} by {host,kube_cluster_name}.rollup(avg, 604800)",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"cool",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"bars"
                        }
                     ]
                  },
                  "layout":{
                     "x":1,
                     "y":1,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":8755762333875652,
                  "definition":{
                     "title":"Cluster Node Cost based on Resource Allocation ($/week)",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1mo"
                     },
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1",
                                 "limit":{
                                    "order":"desc"
                                 }
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.node{$kube_cluster_name,$host,time_window:7_days} by {kube_cluster_name,host}.rollup(avg, 604800)",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "type":"sunburst",
                     "legend":{
                        "type":"table"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":1,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":3845882083626226,
                  "definition":{
                     "title":"Nodes",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.node.count{$kube_cluster_name} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2
                  },
                  "layout":{
                     "x":0,
                     "y":2,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":1658774061081984,
                  "definition":{
                     "title":"Cluster Node Cost From Resource Allocation vs. Cost From Actual Usage ($/6 hours)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1w"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/6 hours)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_alloc_cost.node{$kube_cluster_name,$host,granularity:6_hours} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"purple",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        },
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Usage Cost ($/6 hours)",
                                 "formula":"query0"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_usage_cost.node{$kube_cluster_name,$host,granularity:6_hours} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query0"
                              }
                           ],
                           "style":{
                              "palette":"warm",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        }
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":3,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":8279463927127328,
                  "definition":{
                     "type":"note",
                     "content":"### Cost Efficiency\nThe cost of actual resource usage divided by the cost of allocated resources",
                     "background_color":"yellow",
                     "font_size":"12",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":true,
                     "tick_pos":"50%",
                     "tick_edge":"right",
                     "has_padding":false
                  },
                  "layout":{
                     "x":6,
                     "y":3,
                     "width":1,
                     "height":2
                  }
               },
               {
                  "id":1801368584677892,
                  "definition":{
                     "title":"Cluster Node Cost Efficiency (%)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"auto",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1w"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1 / query2 * 100"
                              }
                           ],
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_usage_cost.node{$kube_cluster_name,$host,granularity:1_hour} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_alloc_cost.node{$kube_cluster_name,$host,granularity:1_hour} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query2"
                              }
                           ],
                           "response_format":"timeseries",
                           "style":{
                              "palette":"dog_classic"
                           },
                           "display_type":"line"
                        }
                     ],
                     "yaxis":{
                        "include_zero":true,
                        "label":"",
                        "scale":"linear",
                        "min":"auto",
                        "max":"auto"
                     }
                  },
                  "layout":{
                     "x":7,
                     "y":3,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":2078597533178992,
                  "definition":{
                     "type":"note",
                     "content":"# Current Cluster Node Configuration",
                     "background_color":"blue",
                     "font_size":"24",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":0,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":1571091560860458,
                  "definition":{
                     "type":"note",
                     "content":"# Recommended Cluster Node Configuration\n***For next week***",
                     "background_color":"blue",
                     "font_size":"18",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":6,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":4321405426051872,
                  "definition":{
                     "title":"Current Cluster Node Configuration (Resource Allocation)",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"CPU Capacity",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              },
                              {
                                 "alias":"Memory Capacity",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query2"
                              },
                              {
                                 "alias":"Storage Size",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query3"
                              },
                              {
                                 "alias":"Cost ($/week)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query6"
                              },
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query7"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:kubernetes_state.node.cpu_capacity{$kube_cluster_name} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:kubernetes_state.node.memory_capacity{$kube_cluster_name} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:system.disk.total{$kube_cluster_name} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query3",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.node{$kube_cluster_name,time_window:7_days} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query6",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_efficiency_per_week.node{$kube_cluster_name,time_window:7_days} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query7",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":6,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":6223467752306372,
                  "definition":{
                     "title":"Recommended Cluster Node Configuration (Resource Allocation)",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Cost ($/week)",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_week.node{$kube_cluster_name,time_window:7_days} by {kube_cluster_name,cpu,memory,kube_node_role,host}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":6,
                     "y":6,
                     "width":4,
                     "height":2
                  }
               },
               {
                  "id":4017672612051786,
                  "definition":{
                     "title":"Recommended Cluster Cost Efficiency (%)",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "cell_display_mode":"number",
                                 "formula":"query4"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:federatorai.recommendation.cost_analysis.cost_efficiency_per_week.cluster{$kube_cluster_name,time_window:7_days} by {kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query4",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":10,
                     "y":6,
                     "width":2,
                     "height":2
                  }
               }
            ]
         },
         "layout":{
            "x":0,
            "y":9,
            "width":12,
            "height":9
         }
      },
      {
         "id":8417359773295668,
         "definition":{
            "title":"Cluster Node Cost Management - Monthly",
            "type":"group",
            "background_color":"vivid_green",
            "show_title":true,
            "layout_type":"ordered",
            "widgets":[
               {
                  "id":1654460531187678,
                  "definition":{
                     "title":"Estimated Savings",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"2d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"((query1 - query2) + abs(query1 - query2)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#0f23db",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.node{$kube_cluster_name,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_month.node{$kube_cluster_name,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"   $/month",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":0,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":7247493522885742,
                  "definition":{
                     "title":"Estimated Savings %",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"2d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"(100 - query1 / query2 * 100 + abs(100 - query1 / query2 * 100)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#6a18c9",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_month.node{$kube_cluster_name,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.node{$kube_cluster_name,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"%",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":3,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":430913996562612,
                  "definition":{
                     "title":"Current Cost based on Resource Allocation",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"2d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.node{$kube_cluster_name,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"$/month",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":2915410458955566,
                  "definition":{
                     "title":"Estimated Cost Based on Recommendations",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"2d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_month.node{$kube_cluster_name,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":" $/month",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":9,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":270867855865162,
                  "definition":{
                     "title":"Clusters",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.node.count{$kube_cluster_name} by {kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2
                  },
                  "layout":{
                     "x":0,
                     "y":1,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":3442796613455570,
                  "definition":{
                     "title":"Cluster Node Cost based on Resource Allocation ($/month)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"3mo"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/month)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.node{$kube_cluster_name,$host,time_window:30_days} by {host,kube_cluster_name}.rollup(avg, 2592000)",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"cool",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"bars"
                        }
                     ]
                  },
                  "layout":{
                     "x":1,
                     "y":1,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":1526484313471450,
                  "definition":{
                     "title":"Cluster Node Cost based on Resource Allocation ($/month)",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"3mo"
                     },
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1",
                                 "limit":{
                                    "order":"desc"
                                 }
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.node{$kube_cluster_name,$host,time_window:30_days} by {kube_cluster_name,host}.rollup(avg, 2592000)",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "type":"sunburst",
                     "legend":{
                        "type":"table"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":1,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":1273923197175902,
                  "definition":{
                     "title":"Nodes",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.node.count{$kube_cluster_name} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2
                  },
                  "layout":{
                     "x":0,
                     "y":2,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":3407417067169742,
                  "definition":{
                     "title":"Cluster Node Cost From Resource Allocation vs. Cost From Actual Usage ($/day)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1mo"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/day)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_alloc_cost.node{$kube_cluster_name,$host,granularity:24_hours} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"purple",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        },
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Usage Cost ($/day)",
                                 "formula":"query0"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_usage_cost.node{$kube_cluster_name,$host,granularity:24_hours} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query0"
                              }
                           ],
                           "style":{
                              "palette":"warm",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        }
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":3,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":2589862114732188,
                  "definition":{
                     "type":"note",
                     "content":"### Cost Efficiency\nThe cost of actual resource usage divided by the cost of allocated resources",
                     "background_color":"yellow",
                     "font_size":"12",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":true,
                     "tick_pos":"50%",
                     "tick_edge":"right",
                     "has_padding":false
                  },
                  "layout":{
                     "x":6,
                     "y":3,
                     "width":1,
                     "height":2
                  }
               },
               {
                  "id":889655886213296,
                  "definition":{
                     "title":"Cluster Node Cost Efficiency (%)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"auto",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1mo"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1 / query2 * 100"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_usage_cost.node{$kube_cluster_name,$host,granularity:24_hours} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_alloc_cost.node{$kube_cluster_name,$host,granularity:24_hours} by {kube_cluster_name,host}",
                                 "data_source":"metrics",
                                 "name":"query2"
                              }
                           ],
                           "style":{
                              "palette":"dog_classic"
                           },
                           "display_type":"line"
                        }
                     ],
                     "yaxis":{
                        "include_zero":true,
                        "label":"",
                        "scale":"linear",
                        "min":"auto",
                        "max":"auto"
                     }
                  },
                  "layout":{
                     "x":7,
                     "y":3,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":1015227773541448,
                  "definition":{
                     "type":"note",
                     "content":"# Current Cluster Node Configuration",
                     "background_color":"blue",
                     "font_size":"24",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":0,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":6289509777454418,
                  "definition":{
                     "type":"note",
                     "content":"# Recommended Cluster Node Configuration\n***For next month***",
                     "background_color":"blue",
                     "font_size":"18",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":6,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":4098492785571288,
                  "definition":{
                     "title":"Current Cluster Node Configuration (Resource Allocation)",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"CPU Capacity",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              },
                              {
                                 "alias":"Memory Capacity",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query2"
                              },
                              {
                                 "alias":"Storage Size",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query3"
                              },
                              {
                                 "alias":"Cost ($/month)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query6"
                              },
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query7"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:kubernetes_state.node.cpu_capacity{$kube_cluster_name} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:kubernetes_state.node.memory_capacity{$kube_cluster_name} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:system.disk.total{$kube_cluster_name} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query3",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.node{$kube_cluster_name,time_window:30_days} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query6",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_efficiency_per_month.node{$kube_cluster_name,time_window:30_days} by {host,kube_node_role,kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query7",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":6,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":2884459230704436,
                  "definition":{
                     "title":"Recommended Cluster Node Configuration (Resource Allocation)",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Cost ($/month)",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_month.node{$kube_cluster_name,time_window:30_days} by {kube_cluster_name,cpu,memory,kube_node_role,host}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":6,
                     "y":6,
                     "width":4,
                     "height":2
                  }
               },
               {
                  "id":5645830404547236,
                  "definition":{
                     "title":"Recommended Cluster Cost Efficiency (%)",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query4"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:federatorai.recommendation.cost_analysis.cost_efficiency_per_month.cluster{$kube_cluster_name,time_window:30_days} by {kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query4",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":10,
                     "y":6,
                     "width":2,
                     "height":2
                  }
               }
            ]
         },
         "layout":{
            "x":0,
            "y":18,
            "width":12,
            "height":9,
            "is_column_break":true
         }
      }
   ],
   "template_variables":[
      {
         "name":"kube_cluster_name",
         "default":"*",
         "prefix":"kube_cluster_name",
         "available_values":[
            
         ]
      },
      {
         "name":"host",
         "default":"*",
         "prefix":"host",
         "available_values":[
            
         ]
      }
   ],
   "layout_type":"ordered",
   "is_read_only":false,
   "notify_list":[
      
   ],
   "reflow_type":"fixed",
   "id":"jku-aa3-7dn"
}
