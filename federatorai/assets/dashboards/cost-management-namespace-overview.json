{
   "title":"ProphetStor Federator.ai Cost Management - Namespace",
   "description":"## ProphetStor Federator.ai is an AI-based solution that helps enterprises manage and optimize resources for applications on Kubernetes and virtual machines (VMs) in VMware clusters.\n\nUsing advanced machine-learning algorithms to predict application workloads, Federator.ai offers:\n\n  - AI-based workload prediction for containerized applications in Kubernetes clusters as well as VMs in VMware clusters and Amazon Web Services (AWS) Elastic Compute Cloud (EC2)\n  - Resource recommendations based on workload prediction, application, Kubernetes, and other related metrics\n  - Automatic provisioning of CPU/memory for generic Kubernetes application controllers/namespaces\n  - Correlation and causality analysis of microservices/controllers of Kubernetes applications\n  - Automatic scaling of Kubernetes application containers, Kafka consumer groups, and Ingress upstream services\n  - Multicloud cost analysis and recommendations based on workload predictions for Kubernetes clusters and VM clusters\n  - Actual cost and potential savings based on recommendations for clusters, Kubernetes applications, VMs, and Kubernetes namespaces",
   "widgets":[
      {
         "id":5576666476130138,
         "definition":{
            "title":"Cluster  Namespace Cost Management - Daily",
            "type":"group",
            "background_color":"vivid_blue",
            "show_title":true,
            "layout_type":"ordered",
            "widgets":[
               {
                  "id":1596327383096410,
                  "definition":{
                     "title":"Estimated Savings",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"((query3 - query1) + abs(query3 - query1)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#0f23db",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query3",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"$/day",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":0,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":238051746241092,
                  "definition":{
                     "title":"Estimated Savings %",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"(100 - query2 / query1 * 100 + abs(100 - query2 / query1 * 100)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#6a18c9",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"%",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":3,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":6859244150747374,
                  "definition":{
                     "title":"Current Cost based on Resource Allocation",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours}.fill(last)",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"$/day",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":3020412275613304,
                  "definition":{
                     "title":"Estimated Cost Based on Recommendations",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":" $/day",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":9,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":4922378087476458,
                  "definition":{
                     "title":"Clusters",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.node.count{$kube_cluster_name} by {kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2
                  },
                  "layout":{
                     "x":0,
                     "y":1,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":8500703265478498,
                  "definition":{
                     "title":"Namespace Cost based on Resource Allocation ($/day)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1w"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/day)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours} by {kube_cluster_name,kube_namespace}.rollup(avg, 86400)",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"cool",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"bars"
                        }
                     ]
                  },
                  "layout":{
                     "x":1,
                     "y":1,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":2401899656061080,
                  "definition":{
                     "title":"Namespace Cost based on Resource Allocation ($/day)",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1w"
                     },
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1",
                                 "limit":{
                                    "order":"desc"
                                 }
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours} by {kube_cluster_name,kube_namespace}.rollup(avg, 86400)",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "type":"sunburst",
                     "legend":{
                        "type":"table"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":1,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":1603911558207132,
                  "definition":{
                     "title":"Namespaces Monitored by ProphetStor Federator.ai",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_day.namespace{$kube_cluster_name} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":0,
                     "y":2,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":4054822290153696,
                  "definition":{
                     "title":"Namespace Cost From Resource Allocation vs. Cost From Actual Usage ($/hour)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/hour)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_alloc_cost.namespace{$kube_cluster_name,granularity:1_hour,$kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"purple",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        },
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Usage Cost ($/hour)",
                                 "formula":"query0"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_usage_cost.namespace{$kube_cluster_name,granularity:1_hour,$kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query0"
                              }
                           ],
                           "style":{
                              "palette":"warm",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        }
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":3,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":2167175242239504,
                  "definition":{
                     "type":"note",
                     "content":"### Cost Efficiency\nThe cost of actual resource usage divided by the cost of allocated resources",
                     "background_color":"yellow",
                     "font_size":"12",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":true,
                     "tick_pos":"50%",
                     "tick_edge":"right",
                     "has_padding":false
                  },
                  "layout":{
                     "x":6,
                     "y":3,
                     "width":1,
                     "height":2
                  }
               },
               {
                  "id":5402416915831094,
                  "definition":{
                     "title":"Namespace Cost Efficiency (%)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"auto",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1 / query2 * 100"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_usage_cost.namespace{$kube_cluster_name,granularity:1_hour,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_alloc_cost.namespace{$kube_cluster_name,granularity:1_hour,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query2"
                              }
                           ],
                           "style":{
                              "palette":"dog_classic"
                           },
                           "display_type":"line"
                        }
                     ],
                     "yaxis":{
                        "include_zero":true,
                        "scale":"linear",
                        "label":"",
                        "min":"auto",
                        "max":"auto"
                     }
                  },
                  "layout":{
                     "x":7,
                     "y":3,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":6136896502800608,
                  "definition":{
                     "type":"note",
                     "content":"# Current Namespace Quota Settings",
                     "background_color":"blue",
                     "font_size":"24",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":0,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":285812371698396,
                  "definition":{
                     "type":"note",
                     "content":"# Recommended Namespace Quota Settings\n***For next 24 hours***",
                     "background_color":"blue",
                     "font_size":"18",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":6,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":4879019372538054,
                  "definition":{
                     "title":"Current Namespace Quota Settings",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"CPU Limit",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              },
                              {
                                 "alias":"CPU Request",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query2"
                              },
                              {
                                 "alias":"Memory Limit",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query3"
                              },
                              {
                                 "alias":"Memory Request",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query4"
                              },
                              {
                                 "alias":"Cost ($/day)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "comparator":">=",
                                       "value":0
                                    }
                                 ],
                                 "formula":"query7"
                              },
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "comparator":">=",
                                       "value":0
                                    }
                                 ],
                                 "formula":"query8"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.resourcequota.limits.cpu.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:kubernetes_state.resourcequota.requests.cpu.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:kubernetes_state.resourcequota.limits.memory.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query3",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:kubernetes_state.resourcequota.requests.memory.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query4",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query7",
                                 "aggregator":"max"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_efficiency_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query8",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":6,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":493285728163120,
                  "definition":{
                     "title":"Recommended Namespace Quota Settings",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Cost ($/day)",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              },
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query2"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours} by {kube_cluster_name,kube_namespace,limit_cpu,limit_memory,request_cpu,request_memory}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:federatorai.recommendation.cost_analysis.cost_efficiency_per_day.namespace{$kube_cluster_name,$kube_namespace,time_window:24_hours} by {kube_cluster_name,kube_namespace,limit_cpu,limit_memory,request_cpu,request_memory}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":6,
                     "y":6,
                     "width":6,
                     "height":2
                  }
               }
            ]
         },
         "layout":{
            "x":0,
            "y":0,
            "width":12,
            "height":9
         }
      },
      {
         "id":7445681978659734,
         "definition":{
            "title":"Cluster  Namespace Cost Management - Weekly",
            "type":"group",
            "background_color":"vivid_purple",
            "show_title":true,
            "layout_type":"ordered",
            "widgets":[
               {
                  "id":5952118150519664,
                  "definition":{
                     "title":"Estimated Savings",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"((query3 - query1) + abs(query3 - query1)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#0f23db",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query3",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"$/week",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":0,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":2515717585000890,
                  "definition":{
                     "title":"Estimated Savings %",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"(100 - query2 / query1 * 100 + abs(100 - query2 / query1 * 100)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#6a18c9",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"%",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":3,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":7381907660162564,
                  "definition":{
                     "title":"Current Cost based on Resource Allocation",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days}.fill(last)",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"$/week",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":3309784243103860,
                  "definition":{
                     "title":"Estimated Cost Based on Recommendations",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":" $/week",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":9,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":2214955106107868,
                  "definition":{
                     "title":"Clusters",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.node.count{$kube_cluster_name} by {kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2
                  },
                  "layout":{
                     "x":0,
                     "y":1,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":2640955173461558,
                  "definition":{
                     "title":"Namespace Cost based on Resource Allocation ($/week)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1mo"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation ($/week)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days} by {kube_cluster_name,kube_namespace}.rollup(avg, 604800)",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"cool",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"bars"
                        }
                     ]
                  },
                  "layout":{
                     "x":1,
                     "y":1,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":7089280251885992,
                  "definition":{
                     "title":"Namespace Cost based on Resource Allocation ($/week)",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"1mo"
                     },
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1",
                                 "limit":{
                                    "order":"desc"
                                 }
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days} by {kube_cluster_name,kube_namespace}.rollup(avg, 604800)",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "type":"sunburst",
                     "legend":{
                        "type":"table"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":1,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":7224998612348846,
                  "definition":{
                     "title":"Namespaces Monitored by ProphetStor Federator.ai",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_week.namespace{$kube_cluster_name} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":0,
                     "y":2,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":6586482400025646,
                  "definition":{
                     "title":"Namespace Cost From Resource Allocation vs. Cost From Actual Usage ($/6 hours)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1w"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/6 hours)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_alloc_cost.namespace{$kube_cluster_name,$kube_namespace,granularity:6_hours}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"purple",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        },
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Usage Cost ($/6 hours)",
                                 "formula":"query0"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_usage_cost.namespace{$kube_cluster_name,$kube_namespace,granularity:6_hours}",
                                 "data_source":"metrics",
                                 "name":"query0"
                              }
                           ],
                           "style":{
                              "palette":"warm",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        }
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":3,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":403956157401984,
                  "definition":{
                     "type":"note",
                     "content":"### Cost Efficiency\nThe cost of actual resource usage divided by the cost of allocated resources",
                     "background_color":"yellow",
                     "font_size":"12",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":true,
                     "tick_pos":"50%",
                     "tick_edge":"right",
                     "has_padding":false
                  },
                  "layout":{
                     "x":6,
                     "y":3,
                     "width":1,
                     "height":2
                  }
               },
               {
                  "id":4739110686395766,
                  "definition":{
                     "title":"Namespace Cost Efficiency (%)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"auto",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1w"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1 / query2 * 100"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_usage_cost.namespace{$kube_cluster_name,$kube_namespace,granularity:1_hour} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_alloc_cost.namespace{$kube_cluster_name,$kube_namespace,granularity:1_hour} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query2"
                              }
                           ],
                           "style":{
                              "palette":"dog_classic"
                           },
                           "display_type":"line"
                        }
                     ],
                     "yaxis":{
                        "include_zero":true,
                        "scale":"linear",
                        "label":"",
                        "min":"auto",
                        "max":"auto"
                     }
                  },
                  "layout":{
                     "x":7,
                     "y":3,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":927165065118852,
                  "definition":{
                     "type":"note",
                     "content":"# Current Namespace Quota Settings",
                     "background_color":"blue",
                     "font_size":"24",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":0,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":8049680516007044,
                  "definition":{
                     "type":"note",
                     "content":"# Recommended Namespace Quota Settings\n***For next week***",
                     "background_color":"blue",
                     "font_size":"18",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":6,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":3987559909786604,
                  "definition":{
                     "title":"Current Namespace Quota Settings",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"CPU Limit",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              },
                              {
                                 "alias":"CPU Request",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query2"
                              },
                              {
                                 "alias":"Memory Limit",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query3"
                              },
                              {
                                 "alias":"Memory Request",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query4"
                              },
                              {
                                 "alias":"Cost ($/week)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "comparator":">=",
                                       "value":0
                                    }
                                 ],
                                 "formula":"query7"
                              },
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "comparator":">=",
                                       "value":0
                                    }
                                 ],
                                 "formula":"query8"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.resourcequota.limits.cpu.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:kubernetes_state.resourcequota.requests.cpu.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:kubernetes_state.resourcequota.limits.memory.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query3",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:kubernetes_state.resourcequota.requests.memory.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query4",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query7",
                                 "aggregator":"max"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_efficiency_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query8",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":6,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":1075605510818156,
                  "definition":{
                     "title":"Recommended Namespace Quota Settings",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Cost ($/week)",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              },
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query2"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days} by {kube_cluster_name,kube_namespace,limit_cpu,limit_memory,request_cpu,request_memory}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:federatorai.recommendation.cost_analysis.cost_efficiency_per_week.namespace{$kube_cluster_name,$kube_namespace,time_window:7_days} by {kube_cluster_name,kube_namespace,limit_cpu,limit_memory,request_cpu,request_memory}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":6,
                     "y":6,
                     "width":6,
                     "height":2
                  }
               }
            ]
         },
         "layout":{
            "x":0,
            "y":9,
            "width":12,
            "height":9
         }
      },
      {
         "id":6809090927199744,
         "definition":{
            "title":"Cluster  Namespace Cost Management - Monthly",
            "type":"group",
            "background_color":"vivid_green",
            "show_title":true,
            "layout_type":"ordered",
            "widgets":[
               {
                  "id":1362109202857702,
                  "definition":{
                     "title":"Estimated Savings",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"2d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"((query1 - query2) + abs(query1 - query2)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#0f23db",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"   $/month",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":0,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":1057863141946862,
                  "definition":{
                     "title":"Estimated Savings %",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"2d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"(100 - query1 / query2 * 100 + abs(100 - query1 / query2 * 100)) / 2"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#6a18c9",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"%",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":3,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":7585465151287820,
                  "definition":{
                     "title":"Current Cost based on Resource Allocation",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"2d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":"$/month",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":7792390391694120,
                  "definition":{
                     "title":"Estimated Cost Based on Recommendations",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"2d"
                     },
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "custom_bg_color":"#278bce",
                                 "comparator":">=",
                                 "palette":"custom_bg",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "custom_unit":" $/month",
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":9,
                     "y":0,
                     "width":3,
                     "height":1
                  }
               },
               {
                  "id":2639420888625804,
                  "definition":{
                     "title":"Clusters",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.node.count{$kube_cluster_name} by {kube_cluster_name}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2
                  },
                  "layout":{
                     "x":0,
                     "y":1,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":7653277722114886,
                  "definition":{
                     "title":"Namespace Cost based on Resource Allocation ($/month)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"3mo"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/month)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days} by {kube_cluster_name,kube_namespace}.rollup(avg, 2592000)",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"cool",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"bars"
                        }
                     ]
                  },
                  "layout":{
                     "x":1,
                     "y":1,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":2224357848786956,
                  "definition":{
                     "title":"Namespace Cost based on Resource Allocation ($/month)",
                     "title_size":"16",
                     "title_align":"left",
                     "time":{
                        "live_span":"3mo"
                     },
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1",
                                 "limit":{
                                    "order":"desc"
                                 }
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days} by {kube_cluster_name,kube_namespace}.rollup(avg, 2592000)",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "type":"sunburst",
                     "legend":{
                        "type":"table"
                     }
                  },
                  "layout":{
                     "x":6,
                     "y":1,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":7064933633898674,
                  "definition":{
                     "title":"Namespaces Monitored by ProphetStor Federator.ai",
                     "title_size":"16",
                     "title_align":"left",
                     "type":"query_value",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"count_not_null(query1)"
                              }
                           ],
                           "conditional_formats":[
                              {
                                 "comparator":">",
                                 "palette":"white_on_yellow",
                                 "value":0
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_month.namespace{$kube_cluster_name} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "autoscale":true,
                     "precision":2,
                     "timeseries_background":{
                        "type":"bars"
                     }
                  },
                  "layout":{
                     "x":0,
                     "y":2,
                     "width":1,
                     "height":1
                  }
               },
               {
                  "id":5548850157735174,
                  "definition":{
                     "title":"Namespace Cost From Resource Allocation vs. Cost From Actual Usage ($/day)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"horizontal",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1mo"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Allocation Cost ($/day)",
                                 "formula":"query1"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_alloc_cost.namespace{$kube_cluster_name,$kube_namespace,granularity:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              }
                           ],
                           "style":{
                              "palette":"purple",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        },
                        {
                           "formulas":[
                              {
                                 "alias":"Resource Usage Cost ($/day)",
                                 "formula":"query0"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"avg:federatorai.cost_analysis.resource_usage_cost.namespace{$kube_cluster_name,$kube_namespace,granularity:24_hours}",
                                 "data_source":"metrics",
                                 "name":"query0"
                              }
                           ],
                           "style":{
                              "palette":"warm",
                              "line_type":"solid",
                              "line_width":"normal"
                           },
                           "display_type":"line"
                        }
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":3,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":3740815848033562,
                  "definition":{
                     "type":"note",
                     "content":"### Cost Efficiency\nThe cost of actual resource usage divided by the cost of allocated resources",
                     "background_color":"yellow",
                     "font_size":"12",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":true,
                     "tick_pos":"50%",
                     "tick_edge":"right",
                     "has_padding":false
                  },
                  "layout":{
                     "x":6,
                     "y":3,
                     "width":1,
                     "height":2
                  }
               },
               {
                  "id":8341950622435950,
                  "definition":{
                     "title":"Namespace Cost Efficiency (%)",
                     "title_size":"16",
                     "title_align":"left",
                     "show_legend":true,
                     "legend_layout":"auto",
                     "legend_columns":[
                        "avg",
                        "min",
                        "max",
                        "value",
                        "sum"
                     ],
                     "time":{
                        "live_span":"1mo"
                     },
                     "type":"timeseries",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "formula":"query1 / query2 * 100"
                              }
                           ],
                           "response_format":"timeseries",
                           "queries":[
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_usage_cost.namespace{$kube_cluster_name,$kube_namespace,granularity:24_hours} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query1"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.resource_alloc_cost.namespace{$kube_cluster_name,$kube_namespace,granularity:24_hours} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query2"
                              }
                           ],
                           "style":{
                              "palette":"dog_classic"
                           },
                           "display_type":"line"
                        }
                     ],
                     "yaxis":{
                        "include_zero":true,
                        "scale":"linear",
                        "label":"",
                        "min":"auto",
                        "max":"auto"
                     }
                  },
                  "layout":{
                     "x":7,
                     "y":3,
                     "width":5,
                     "height":2
                  }
               },
               {
                  "id":8025074316231154,
                  "definition":{
                     "type":"note",
                     "content":"# Current Namespace Quota Settings",
                     "background_color":"blue",
                     "font_size":"24",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":0,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":250566950984194,
                  "definition":{
                     "type":"note",
                     "content":"# Recommended Namespace Quota Settings\n***For next month***",
                     "background_color":"blue",
                     "font_size":"18",
                     "text_align":"left",
                     "vertical_align":"center",
                     "show_tick":false,
                     "tick_pos":"50%",
                     "tick_edge":"left",
                     "has_padding":true
                  },
                  "layout":{
                     "x":6,
                     "y":5,
                     "width":6,
                     "height":1
                  }
               },
               {
                  "id":2158669749077428,
                  "definition":{
                     "title":"Current Namespace Quota Settings",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"CPU Limit",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              },
                              {
                                 "alias":"CPU Request",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query2"
                              },
                              {
                                 "alias":"Memory Limit",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query3"
                              },
                              {
                                 "alias":"Memory Request",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"custom_bg",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query4"
                              },
                              {
                                 "alias":"Cost ($/month)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "comparator":">=",
                                       "value":0
                                    }
                                 ],
                                 "formula":"query7"
                              },
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "palette":"white_on_yellow",
                                       "comparator":">=",
                                       "value":0
                                    }
                                 ],
                                 "formula":"query8"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"avg:kubernetes_state.resourcequota.limits.cpu.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:kubernetes_state.resourcequota.requests.cpu.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:kubernetes_state.resourcequota.limits.memory.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query3",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:kubernetes_state.resourcequota.requests.memory.limit{$kube_cluster_name,$kube_namespace} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query4",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query7",
                                 "aggregator":"max"
                              },
                              {
                                 "query":"sum:federatorai.cost_analysis.cost_efficiency_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days} by {kube_cluster_name,kube_namespace}",
                                 "data_source":"metrics",
                                 "name":"query8",
                                 "aggregator":"max"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":0,
                     "y":6,
                     "width":6,
                     "height":2
                  }
               },
               {
                  "id":1690217087160038,
                  "definition":{
                     "title":"Recommended Namespace Quota Settings",
                     "title_size":"16",
                     "title_align":"center",
                     "time":{
                        "live_span":"1h"
                     },
                     "type":"query_table",
                     "requests":[
                        {
                           "formulas":[
                              {
                                 "alias":"Cost ($/month)",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "limit":{
                                    "count":500,
                                    "order":"desc"
                                 },
                                 "formula":"query1"
                              },
                              {
                                 "alias":"Cost Efficiency (%)",
                                 "conditional_formats":[
                                    {
                                       "custom_bg_color":"#676767",
                                       "palette":"white_on_green",
                                       "value":0,
                                       "comparator":">="
                                    }
                                 ],
                                 "formula":"query2"
                              }
                           ],
                           "response_format":"scalar",
                           "queries":[
                              {
                                 "query":"sum:federatorai.recommendation.cost_analysis.cost_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days} by {kube_cluster_name,kube_namespace,limit_cpu,limit_memory,request_cpu,request_memory}",
                                 "data_source":"metrics",
                                 "name":"query1",
                                 "aggregator":"last"
                              },
                              {
                                 "query":"avg:federatorai.recommendation.cost_analysis.cost_efficiency_per_month.namespace{$kube_cluster_name,$kube_namespace,time_window:30_days} by {kube_cluster_name,kube_namespace,limit_cpu,limit_memory,request_cpu,request_memory}",
                                 "data_source":"metrics",
                                 "name":"query2",
                                 "aggregator":"last"
                              }
                           ]
                        }
                     ],
                     "custom_links":[
                        
                     ]
                  },
                  "layout":{
                     "x":6,
                     "y":6,
                     "width":6,
                     "height":2
                  }
               }
            ]
         },
         "layout":{
            "x":0,
            "y":18,
            "width":12,
            "height":9,
            "is_column_break":true
         }
      }
   ],
   "template_variables":[
      {
         "name":"kube_cluster_name",
         "default":"*",
         "prefix":"kube_cluster_name",
         "available_values":[
            
         ]
      },
      {
         "name":"kube_namespace",
         "default":"*",
         "prefix":"kube_namespace",
         "available_values":[
            
         ]
      }
   ],
   "layout_type":"ordered",
   "is_read_only":false,
   "notify_list":[
      
   ],
   "reflow_type":"fixed",
   "id":"dbf-dmt-85i"
}
